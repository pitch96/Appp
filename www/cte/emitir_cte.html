<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <!--<meta http-equiv="Content-Security-Policy" content="default-src blob: * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *; img-src * data:; worker-src * data: blob:" />-->
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
     <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: 'unsafe-inline' https://ssl.gstatic.com blob:; style-src 'self' 'unsafe-inline'; media-src *" />


    <link rel="stylesheet" type="text/css" href="../css/core.css" />
    <link rel="stylesheet" type="text/css" href="../css/core-colors.min.css">
    <link rel="stylesheet" type="text/css" href="../css/core-icons.min.css">
    <link rel="stylesheet" type="text/css" href="../css/core_customs.css">
    <link rel="stylesheet" href="../css/fontawesome/css/all.css">
	
    <title>Emitir CTE</title>


    <style>
        .hr_cert {
            border: none;
            width: 90%;
            margin-top: -50px;
            border-bottom: 1px solid #39bac4;
            box-shadow: 0 20px 20px -20px rgba(0,0,0,.5);
            margin: -20px auto 10px;
        }

        .dados-label {
            display: block;
            margin-bottom: .5rem;
        }

    </style>

</head>

<body>
   <div class="app" style="display: none;">
<div class="header pos-absolute bg-purple">

		<button id="btnVoltar" class="action-button mini bg-purple fg-white" data-role="ripple" ><span class="i-back i-2x"></span></button>
          <span class="app-title"> Emitir CT-E</span>

        </div>
       <ul class="header-present flex tabs deep bg-purple-700 fg-white" data-target="#tabs" data-deep="deep"
           data-tabs-color="bg-purple-700" data-font-color="fg-white" data-role="tabs,ripple" data-ripple-target=".tab" data-marker-color="bg-yellow">
           <li class="tab" id="tab_dados_nfe" data-target="dados_nfe">Dados</li>
           <li class="tab" id="tab_resumo_cte" data-target="resumo_cte">Confirmação Dados</li>
           <li class="tab" id="tab_emitir_cte" data-target="emitir_cte">DACTE</li>


       </ul>

        <div class="view-content">
            <form id='myform' enctype="multipart/form-data" method="POST">
                <div id="tabs">
                <div id="dados_nfe" >
                    <div class="grid-list">
                        <div class="full-size row bg-amber">
                            <div class="cell"><p class="subheading align-center">Passo 1: Adicione notas fiscais do CTE-E clicando no botão Adicionar +</p></div>
                        </div>

                        <div class="row padding1">
                            <div class="cell align-center">
                                <h3 class="subheading fg-black align-left">Centro de expedição:</h3>
                                <div class="full-size">

                                    <select name="cnpj" id="cnpj" tabindex="3" class="full-size input-control" required>
                                        <!--<option value="" disabled selected>Selecione o Centro</option>-->
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="grid-list ">

                            <div class="row padding1">
                                <ul class="list full-width" id="lista_notas" data-role="ripple" data-ripple-target="li" data-ripple-color="#448aff"></ul>
                            </div>

                            <div class="row padding2"></div>

                        </div>


                       <!-- <div class="row padding1">
                            <div class="cell align-center"><button class="size0 raised-button bg-green fg-white" tabindex="4" onclick="  $('#tab_foto_nota').trigger('click');event.preventDefault();">Próxima Etapa</button></div>
                        </div>-->

                        <div class="row padding5"><div class="cell align-center"></div></div>

                    </div>
                </div>
                <div id="resumo_cte">
                    <div class="grid-list">
                        <div class="full-size row bg-amber">
                            <div class="cell"><p class="subheading align-center">Passo 2:  Verifique os Dados do CTE</p></div>
                        </div>


                        <div class="row padding1">
                            <div class="cell align-center">
                                <div class="full-size">
                                    <div class="row">
                                        <div class="cell"><h2 class="display5 fg-black align-center">Resumo CT-E</h2></div>
                                    </div>


                                    <!--------Geral-------->
                                    <div class="row padding1">
                                        <div class="cell"><p class="display5 fg-orange align-left">Geral</p></div>
                                    </div>
                                    <hr class="hr_cert">
                                    <div class="row padding1">
                                        <div class="cell align-left">
                                            <div class="row padding1">
                                                <div class="cell align-left">
                                                    <label class="dados-label"><strong>Remetente:</strong> <span id="nome_remetente"></span></label>
                                                    <label class="dados-label"><strong>UF:</strong> <span id="uf_remetente"></span></label>
                                                    <label class="dados-label"><strong>Cidade:</strong> <span id="cidade_remetente"></span></label>
                                                    <label class="dados-label"><strong>Destinatário:</strong> <span id="nome_destinatario"></span></label>
                                                    <label class="dados-label"><strong>Endereço:</strong> <span id="endereco_destinatario"></span></label>
                                                    <label class="dados-label"><strong>UF:</strong> <span id="uf_destinatario"></span></label>
                                                    <label class="dados-label"><strong>Cidade:</strong> <span id="cidade_destinatario"></span></label>
                                                    <label class="dados-label"><strong>CEP:</strong> <span id="cep_destinatario"></span></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--------Geral-------->

                                    <!--------Carga-------->
                                    <div class="row padding1">
                                        <div class="cell"><p class="display5 fg-orange align-left">Carga</p></div>
                                    </div>
                                    <hr class="hr_cert">
                                    <div class="row padding1">
                                        <div class="cell align-left">
                                            <div class="row padding1">
                                                <div class="cell align-left">
                                                    <label class="dados-label"><strong>Valor da Carga:</strong> <span id="valor_carga"></span></label>
                                                    <label class="dados-label"><strong>Nota(s):</strong> <span id="notas_carga" style="font-size: 0.8em;"></span></label>
                                                    <label class="dados-label"><strong>Peso Liquido:</strong> <span id="peso_liquido_carga"></span></label>
                                                    <label class="dados-label"><strong>Peso Bruto:</strong> <span id="peso_bruto_carga"></span></label>
                                                    <label class="dados-label"><strong>Qtd Vol:</strong> <span id="qtde_volume_carga"></span></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--------Carga-------->

                                    <!--------Valores-------->
                                    <div class="row padding1">
                                        <div class="cell"><p class="display5 fg-orange align-left">Valores</p></div>
                                    </div>
                                    <hr class="hr_cert">
                                    <div class="row padding1">
                                        <div class="cell align-left">
                                            <label><strong>Valor Frete:</strong></label>
                                            <div class="row padding1">
                                                <div class="cell align-left">
                                                    <label class="dados-label"><strong>Valor: </strong> <span id="valor_frete_valores"></span></label>
                                                </div>
                                            </div>

                                            <label><strong>Aliquotas Incidentes:</strong></label>
                                            <div class="row padding1">
                                                <div class="cell align-left">
                                                    <label class="dados-label"><strong>PIS:</strong> <span id="pis_valores"></span></label>
                                                    <label class="dados-label"><strong>COFINS:</strong> <span id="cofins_valores"></span></label>
                                                    <label class="dados-label"><strong>ICMS:</strong> <span id="icms_valores"></span></label>
                                                    <label class="dados-label"><strong>Simples Nacional:</strong> <span id="simples_valores"></span></label>
                                                    <label class="dados-label"><strong>Total Incidente:</strong> <span id="total_aliquota_valores"></span></label>
                                                    <label class="dados-label"><strong>Total de Tributos:</strong> <span id="total_tributos_valores"></span></label>
                                                    <label class="dados-label"><strong>Valor Total do Frete:</strong> <span id="valor_total_frete_valores"></span></label>
                                                    <label class="dados-label"><strong>CFOP:</strong> <span id="cfop_valores"></span></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--------Valores-------->

                                    <!--------Modal-------->
                                    <div class="row padding1">
                                        <div class="cell"><p class="display5 fg-orange align-left">Modal</p></div>
                                    </div>
                                    <hr class="hr_cert">
                                    <div class="row padding1">
                                        <div class="cell align-left">
                                            <div class="row padding1">
                                                <div class="cell align-left">
                                                    <label class="dados-label"><strong>Data Prevista de Entrega:</strong> <span id="data_previsao_entrega_modal"></span></label>
                                                    <label class="dados-label"><strong>RNTRC:</strong> <span id="rntrc_modal"></span></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--------Modal-------->

                                    <!--------Informações Adicionais-------->
                                    <div class="row padding1">
                                        <div class="cell"><p class="display5 fg-orange align-left">Informações Adicionais</p></div>
                                    </div>
                                    <hr class="hr_cert">
                                    <div class="row padding1">
                                        <div class="cell align-left">

                                            <label><strong>Observações do Contribuinte:</strong></label>

                                            <div class="row padding1">
                                                <div class="cell align-left" id="informacoes_cell">
                                                    <label class="dados-label"><strong>Lei da Transparencia:</strong> O valor aproximado de tributos incidentes sobre o preço deste serviço é de R$ 3.20</label>
                                                </div>
                                            </div>

                                            <label><strong>Observações do Fisco:</strong></label>

                                            <div class="row padding1">
                                                <div class="cell align-left">
                                                    <label class="dados-label"><strong>Obs: </strong> <span id="obs_fisco"></span></label>
                                                </div>
                                            </div>


                                            <label><strong>Observações do Frete:</strong></label>
                                            <div class="row padding1">
                                                <div class="cell align-left" id="observacoes_frete_cell">
                                                    <label class="dados-label"><strong>Seguro:</strong> 0.00</label>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <!--------Informações Adicionais-------->





                                </div>


                            </div>
                        </div>


                        <div class="row padding1">
                            <div class="cell align-center"><button class="size0 raised-button bg-green fg-white" onclick="$('#tab_emitir_cte').trigger('click');event.preventDefault();">Próxima Etapa</button></div>
                        </div>

                        <div class="row padding5"><div class="cell align-center"></div></div>
                    </div>
                </div>

                <div id="emitir_cte">
                    <div class="grid-list">
                        <div class="full-size row bg-amber"  id="passo3">
                            <div class="cell"><p class="subheading align-center">Passo 3: Clique para efetuar a Emissão do CTE</p></div>
                        </div>
                        <div class="full-size row bg-amber" id="passo4" style="display: none;">
                            <div class="cell"><p class="subheading align-center">Passo 4: Clique para visualizar o DACTE</p></div>
                        </div>


                        <div class="row padding1"><div class="cell align-center"></div></div>

                        <div class="row padding1">
                            <div class="cell align-center">
                              <button id="dacte" class="raised-button bg-white align-right" onclick="event.preventDefault();" style="height: 120px; display: none;"><span  class="fa-6x fa fa-file-pdf fg-purple-300"></span> Abrir DACTE</button>
                            </div>
                        </div>

                        <div class="row padding1">
                            <div class="cell align-center"><button class="size0 raised-button bg-purple fg-white" id="btnEmitirCTE" onclick="event.preventDefault();">Emitir CT-E</button></div>
                        </div>

                        <div class="row padding1">
                            <label class="display1 align-center" id="status_cte" style="display: none;"></label>
                        </div>


                        <div class="row padding5"><div class="cell align-center"></div></div>
                    </div>


                </div>


            </div>





            </form>

            <div id="dialogNFE" data-role="dialog" data-close-button="true" data-overlay="true" class="dialog full-width"  >
                <div class="dialog-content align-center"   style="max-height:400px;">
                    <div class="dialog-title">Adicionar NF-E</div>
                    <div class="grid-list">
                        <div class="full-size row bg-amber">
                            <div class="cell"><p class="subheading align-center">Aponte a camera para o codigo de barras da nota fiscal, ou Preencha os dados Manualmente</p></div>
                        </div>

                        <div class="row padding1">
                            <div class="cell align-center">
                                <div class="full-size input-control with-icon">
                                    <input type="number" min="0" step="1" name="nfe" maxlength="9"  id="nfe" tabindex="1"  placeholder="Digite o Nº da NF-E / OS" required>
                                    <span class="label">Número NF-E:</span>
                                    <span class="i-event_note icon"></span>
                                    <hr>
                                </div>
                                <div class="full-size input-control with-icon">
                                    <input type="number" min="0" step="1" name="serie" maxLength="3" id="serie" tabindex="2" placeholder="Digite a Série" required>
                                    <span class="label">Série:</span>
                                    <span class="i-event_note icon"></span>
                                    <hr>
                                </div>
                            </div>
                        </div>

                        <div class="row padding1 align-center fg-white">
                            <div class="cell align-center">
                                <div class="bg-purple align-center padding1" id="button_scanner" >
                                    <button class="margin2 action-button bg-red fg-white">
                                        <span class="i-running_tasks i-2x"></span></button>
                                    <p class="subheading align-center fg-white"> Escanear Código de Barras</p></div>

                            </div>
                        </div>

                        <div class="row padding5"><div class="cell align-center"></div></div>


                    </div>
                </div>

                <div class="dialog-actions">
                    <button class="flat-button place-left" onclick="coreDialog.close('#dialogNFE'); ">Fechar</button>
                    <button class="raised-button bg-green fg-white" onclick="app.addNota();coreDialog.close('#dialogNFE');screen.orientation.lock('portrait');">Adicionar</button>
                </div>
            </div>


            <div id="dialogProcessMessage" data-role="dialog" data-close-button="true" data-overlay="true" class="dialog full-width"  >
                <div class="dialog-content align-center">
                    <div class="dialog-title"><span id="process-message-title"></span></div>
                    <div class="grid-list">
                        <div class="row padding1">
                            <div class="cell align-center">
                                <div class="full-size">
                                    <img id="process-message"  />
                                    <span id="process-message-text"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dialog-actions">
                    <button class="flat-button place-left" onclick="coreDialog.close('#dialogProcessMessage')">Fechar</button>
                </div>
            </div>

            <div id="dialogScanner" data-role="dialog" data-close-button="true" data-overlay="true" class="dialog full-width full-height" >
                <div class="dialog-content align-center"  >

                    <div id="interactive" class="viewport"><video  autoplay="true" preload="auto" src=""></video></div>
                </div>
                <div class="dialog-actions">
                    <button class="flat-button" onclick="closeScanner(); screen.orientation.lock('portrait');">Fechar</button>
                </div>
            </div>


            <div class="multi-action floating-action-bottom">
                <button class="action-button bg-red fg-white" id="btnNovo"  onclick="event.preventDefault();coreDialog.open('#dialogNFE');screen.orientation.lock('portrait');document.barcodeScanner.init(); "><span class="i-add icon"></span></button>
            </div>


        </div>
	</div>

	
   <script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
   <script type="text/javascript" src="../cordova.js"></script>
   <script type="text/javascript" src="../js/util.js"></script>
   <script src="../js/cte/cte_webservice_access.js" type="text/javascript"></script>
   <script type="text/javascript" src="../js/cte/emitir_cte.js"></script>
   <script type="text/javascript" src="../js/cte/cte_configs.js"></script>
   <script type="text/javascript" src="../js/core.min.js"></script>

    <script type="text/javascript">
        app.initialize();
    </script>




</body>

</html>
